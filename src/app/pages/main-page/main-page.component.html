<div class="dashboard-container">
  <!-- Cards -->
  <div class="cards">
    <!-- Card Saldo Total -->
    <div class="card saldo">
      <p class="title">Saldo Atual</p>
      <p class="value" *ngIf="!loadingSaldo" [class.negative]="saldoTotal < 0">
        {{ saldoTotal >= 0 ? '+' : '' }} R$ {{ formatarMoeda(Math.abs(saldoTotal)) }}
      </p>
      <p class="value loading" *ngIf="loadingSaldo">
        Carregando...
      </p>
    </div>

    <!-- Card Despesas -->
    <div class="card despesas">
      <div class="card-header">
        <p class="title">Despesas do Mês</p>
        <div class="card-buttons">
          <button class="btn-add" (click)="abrirModalDespesa()" title="Adicionar Despesa">
            + Adicionar
          </button>
          <button class="btn-edit" (click)="abrirModalEditarDespesa()" title="Editar Despesa">
            ✏️ Editar
          </button>
        </div>
      </div>
      <p class="value" *ngIf="!loadingDespesas">
        - R$ {{ formatarMoeda(totalDespesas) }}
      </p>
      <p class="value loading" *ngIf="loadingDespesas">
        Carregando...
      </p>
    </div>

    <!-- Card Receitas -->
    <div class="card receitas">
      <div class="card-header">
        <p class="title">Receitas do Mês</p>
        <div class="card-buttons">
          <button class="btn-add" (click)="abrirModalReceita()" title="Adicionar Receita">
            + Adicionar
          </button>
          <button class="btn-edit" (click)="abrirModalEditarReceita()" title="Editar Receita">
            ✏️ Editar
          </button>
        </div>
      </div>
      <p class="value" *ngIf="!loadingReceitas">
        + R$ {{ formatarMoeda(totalReceitas) }}
      </p>
      <p class="value loading" *ngIf="loadingReceitas">
        Carregando...
      </p>
    </div>
  </div>

  <!-- Seção de gráficos -->
  <div class="content-box">
    <app-charts></app-charts>
  </div>

  <!-- Modal de Adicionar Receita -->
  <app-add-receita-modal
    *ngIf="modalReceitaAberto"
    [contas]="contas"
    (fechar)="fecharModalReceita()"
    (receitaAdicionada)="onReceitaAdicionada()"
  ></app-add-receita-modal>

  <!-- Modal de Editar Receita -->
  <app-edit-receita-modal
    *ngIf="modalEditarReceitaAberto"
    [contas]="contas"
    (fechar)="fecharModalEditarReceita()"
    (receitaEditada)="onReceitaEditada()"
  ></app-edit-receita-modal>

  <!-- Modal de Adicionar Despesa -->
  <app-add-despesa-modal
    *ngIf="modalDespesaAberto"
    [contas]="contas"
    (fechar)="fecharModalDespesa()"
    (despesaAdicionada)="onDespesaAdicionada()"
  ></app-add-despesa-modal>

  <!-- Modal de Editar Despesa -->
  <app-edit-despesa-modal
    *ngIf="modalEditarDespesaAberto"
    [contas]="contas"
    (fechar)="fecharModalEditarDespesa()"
    (despesaEditada)="onDespesaEditada()"
  ></app-edit-despesa-modal>
</div>
